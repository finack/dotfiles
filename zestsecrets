if [[ -n $ZESTSECRETS ]]; then
  zest_secrets_path=$ZESTSECRETS
elif [[ -e "/etc/zestsecrets" ]]; then
  zest_secrets_path="/etc/zestsecrets"
else
  echo "~/.zestsecrets could not find path to the treasure. Secrets not available"
  exit 0
fi

function export_secret {
  echo "Creating secret $1 via path $2"
  secret=$zest_secrets_path/$2
  if [[ -e $secret ]]; then
    export $1="`cat $secret`"
  else
   echo "Could not find the secret $secret for $1" 
  fi
}

export_secret aws_access_key_id 'application_keys/aws_access_key'
export_secret aws_secret_access_key 'application_keys/aws_secret_access_key'
export_secret EPHRASE "application_keys/.passphrase"

# vim: ft=sh
